# This file was generated by Ansible for {{ansible_fqdn}}
# Do NOT modify this file by hand!

##################### Grafana Configuration Example #####################
#
# Everything has defaults so you only need to uncomment things you want to
# change

app_mode = {{ grafana_app_mode }}

#################################### Paths ####################################
[paths]
# Path to where grafana can store temp files, sessions, and the sqlite3 db (if that is useD)
#
data = {{ grafana_data }}
#
# Directory where grafana can store logs
#
logs = {{ grafana_logs }}

#################################### Server ####################################
[server]
# Protocol (http or https)
protocol = {{ grafana_protocol }}

# The ip address to bind to, empty will bind to all interfaces
http_addr = {{ grafana_http_addr }}

# The http port  to use
http_port = {{ grafana_http_port }}

# The public facing domain name used to access grafana from a browser
domain = {{ grafana_domain }}

# Redirect to correct domain if host header does not match domain
# Prevents DNS rebinding attacks
enforce_domain = {{ grafana_enforce_domain|to_nice_json }}

# The full public facing url
root_url = {{ grafana_root_url }}

# Log web requests
router_logging = {{ grafana_router_logging|to_nice_json }}

# the path relative working path
static_root_path = {{ grafana_static_root_path }}

# enable gzip
enable_gzip = {{ grafana_enable_gzip|to_nice_json }}

# https certs & key file
cert_file = {{ grafana_cert_file }}
cert_key = {{ grafana_cert_key }}

#################################### Database ####################################
[database]
# Either "mysql", "postgres" or "sqlite3", it's your choice
type = {{ grafana_type }}
host = {{ grafana_host }}
name = {{ grafana_name }}
user = {{ grafana_user }}
password = {{ grafana_password }}

# For "postgres" only, either "disable", "require" or "verify-full"
ssl_mode = {{ grafana_ssl_mode }}

# For "sqlite3" only, path relative to data_path setting
path = {{ grafana_path }}

#################################### Session ####################################
[session]
# Either "memory", "file", "redis", "mysql", "postgres", default is "file"
provider = {{ grafana_provider }}

# Provider config options
# memory: not have any config yet
# file: session dir path, is relative to grafana data_path
# redis: config like redis server addr, poolSize, password, e.g. `addr=127.0.0.1:6379,pool_size=100,db=grafana`
# postgres: user=a password=b host=localhost port=5432 dbname=c sslmode=disable
# mysql: go-sql-driver/mysql dsn config string, e.g. `user:password@tcp(127.0.0.1:3306)/database_name`
provider_config = {{ grafana_provider_config }}

# Session cookie name
cookie_name = {{ grafana_cookie_name }}

# If you use session in https only, default is false
cookie_secure = {{ grafana_cookie_secure|to_nice_json}}

# Session life time, default is 86400
session_life_time = {{ grafana_session_life_time }}
gc_interval_time = {{ grafana_gc_interval_time }}

#################################### Analytics ####################################
[analytics]
# Server reporting, sends usage counters to stats.grafana.org every 24 hours.
# No ip addresses are being tracked, only simple counters to track
# running instances, dashboard and error counts. It is very helpful to us.
# Change this option to false to disable reporting.
reporting_enabled = {{ grafana_reporting_enabled|to_nice_json }}

# Google Analytics universal tracking code, only enabled if you specify an id here
google_analytics_ua_id = {{ grafana_google_analytics_ua_id }}

# Google Tag Manager ID, only enabled if you specify an id here
google_tag_manager_id = {{ grafana_google_tag_manager_id }}

#################################### Security ####################################
[security]
# default admin user, created on startup
admin_user = {{ grafana_admin_user }}

# default admin password, can be changed before first start of grafana,  or in profile settings
admin_password = {{ grafana_admin_password }}

# used for signing
secret_key = {{ grafana_secret_key }}

# Auto-login remember days
login_remember_days = {{ grafana_login_remember_days }}
cookie_username = {{ grafana_cookie_username }}
cookie_remember_name = {{ grafana_cookie_remember_name }}

# disable gravatar profile images
disable_gravatar = {{ grafana_disable_gravatar|to_nice_json}}

# data source proxy whitelist (ip_or_domain:port seperated by spaces)
data_source_proxy_whitelist =  {{ grafana_data_source_proxy_whitelist }}

#################################### Users ####################################
[users]
# disable user signup / registration
allow_sign_up = {{ grafana_allow_sign_up|to_nice_json }}

# Allow non admin users to create organizations
allow_org_create = {{ grafana_allow_org_create|to_nice_json }}

# Set to true to automatically assign new users to the default organization (id 1)
auto_assign_org = {{ grafana_auto_assign_org|to_nice_json }}

# Default role new users will be automatically assigned (if disabled above is set to true)
auto_assign_org_role = {{ grafana_auto_assign_org_role }}

# Require email validation before sign up completes
verify_email_enabled = {{ grafana_verify_email_enabled|to_nice_json }}

#################################### Anonymous Auth ##########################
[auth.anonymous]
# enable anonymous access
enabled = {{ grafana_anonymous_enabled|to_nice_json }}

# specify organization name that should be used for unauthenticated users
org_name = {{ grafana_anonymous_org_name }}

# specify role for unauthenticated users
org_role = {{ grafana_anonymous_org_role }}

#################################### Github Auth ##########################
[auth.github]
enabled = {{ grafana_github_enabled|to_nice_json }}
client_id = {{ grafana_github_client_id }}
client_secret = {{ grafana_github_client_secret }}
scopes = {{ grafana_github_scopes }}
auth_url = {{ grafana_github_auth_url }}
token_url = {{ grafana_github_token_url }}
api_url = {{ grafana_github_api_url }}
team_ids = {{ grafana_github_team_ids }}
allowed_organizations =  {{ grafana_github_allowed_organizations }}
allow_sign_up = {{ grafana_github_auth_allow_sign_up }}


# Uncomment bellow to only allow specific email domains

#################################### Google Auth ##########################
[auth.google]
enabled = {{ grafana_google_enabled|to_nice_json }}
client_id = {{ grafana_google_client_id }}
client_secret = {{ grafana_google_client_secret }}
scopes = {{ grafana_google_scopes }}
auth_url = {{ grafana_google_auth_url }}
token_url = {{ grafana_google_token_url }}
api_url = {{ grafana_google_api_url }}
allow_sign_up = {{ grafana_google_auth_allow_sign_up }}

# Uncomment bellow to only allow specific email domains
allowed_domains = {{ grafana_google_allowed_domains }}

#################################### Basic Auth ##########################
[auth.basic]
enabled = {{ grafana_auth_basic_enabled|to_nice_json}}

#################################### Auth Proxy ##########################
[auth.proxy]
enabled = {{ grafana_auth_proxy_enabled|to_nice_json}}
header_name = {{ grafana_auth_proxy_header_name }}
header_property = {{ grafana_auth_proxy_header_property }}
auto_sign_up = {{ grafana_auth_proxy_auto_sign_up|to_nice_json}}

#################################### Auth LDAP ##########################
[auth.ldap]
enabled = {{ grafana_auth_ldap_enabled|to_nice_json}}
config_file = {{ grafana_auth_ldap_config_file }}

#################################### SMTP / Emailing ##########################
[smtp]
enabled = {{ grafana_smtp_enabled|to_nice_json}}
host = {{ grafana_smtp_host }}
user = {{ grafana_smtp_user }}
password = {{ grafana_smtp_password }}
cert_file = {{ grafana_smtp_cert_file }}
key_file = {{ grafana_smtp_key_file }}
skip_verify = {{ grafana_smtp_skip_verify|to_nice_json}}
from_address = {{ grafana_smtp_from_address }}

[emails]
welcome_email_on_sign_up =  {{ grafana_emails_welcome_email_on_sign_up|to_nice_json}}
templates_pattern =  {{ grafana_templates_pattern }}

#################################### Logging ##########################
[log]
# Either "console", "file", default is "console"
# Use comma to separate multiple modes, e.g. "console, file"
mode = {{ grafana_log_mode }}

# Buffer length of channel, keep it as it is if you don't know what it is.
buffer_len = {{ grafana_log_buffer_len }}

# Either "Trace", "Debug", "Info", "Warn", "Error", "Critical", default is "Trace"
level = {{ grafana_log_level }}

# For "console" mode only
[log.console]
;level =

# For "file" mode only
[log.file]
;level =
# This enables automated log rotate(switch of following options), default is true
;log_rotate = true

# Max line number of single file, default is 1000000
;max_lines = 1000000

# Max size shift of single file, default is 28 means 1 << 28, 256MB
;max_lines_shift = 28

# Segment log daily, default is true
;daily_rotate = true

# Expired days of log file(delete after max days), default is 7
;max_days = 7

#################################### AMPQ Event Publisher ##########################
[event_publisher]
;enabled = false
;rabbitmq_url = amqp://localhost/
;exchange = grafana_events

#################################### Dashboard JSON files ##########################
[dashboards.json]
enabled = {{ grafana_dashboard_json_enabled|to_nice_json}}
path = {{ grafana_dashboard_json_path }}

#################################### Usage Quotas ##########################
[quota]
enabled = {{ grafana_quota_enabled|to_nice_json }}

#### set quotas to -1 to make unlimited. ####
# limit number of users per Org.
org_user = {{ grafana_quota_org_user }}

# limit number of dashboards per Org.
org_dashboard = {{ grafana_quota_org_dashboard }}

# limit number of data_sources per Org.
org_data_source = {{ grafana_quota_org_data_source }}

# limit number of api_keys per Org.
org_api_key =  {{ grafana_quota_org_api_key }}

# limit number of orgs a user can create.
user_org =  {{ grafana_quota_user_org }}

# Global limit of users.
global_user = {{ grafana_quota_global_user }}

# global limit of orgs.
global_org = {{ grafana_quota_global_org }}

# global limit of dashboards
global_dashboard = {{ grafana_quota_global_dashboard }}

# global limit of api_keys
global_api_key = {{ grafana_quota_global_api_key }}

# global limit on number of logged in users.
global_session = {{ grafana_quota_global_session }}
